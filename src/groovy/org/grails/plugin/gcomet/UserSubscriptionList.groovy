package org.grails.plugin.gcometimport org.grails.plugin.gcomet.GCometComponentSubscriberimport org.grails.plugin.gcomet.SubscribeMessageimport org.grails.plugin.gcomet.UnsubscribeMessageimport org.grails.plugin.gcomet.UpdateComponentStateMessageimport org.grails.plugin.gcomet.GetComponentStateMessageimport org.grails.plugin.gcomet.GCometComponentStateimport groovyx.gpars.GParsPoolclass UserSubscriptionList {	static scope = 'session'		def subscribers = []		def retrieveStateUpdatesForUser(){		GParsPool.withPool { subscribers.parallel.map{[it.sendAndWait(new GetComponentStateMessage())]}.reduce({states1, states2 -> states1 +=states2})}	}		def isSubscribedTo(component){		return subscribers.any {it.subscribedTo == component.name}	}		def leftShift(subscriber){		subscribers << subscriber	}}